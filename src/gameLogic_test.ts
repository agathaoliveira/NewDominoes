describe("In Dominoes", function() {

  function expectMove(numberOfPlayers: number,
      turnIndexBeforeMove: number, stateBeforeMove: IState, stateAfterMove: IState, move: IMove, isOk: boolean): void {
    expect(gameLogic.isMoveOk({
      turnIndexBeforeMove: turnIndexBeforeMove,
      turnIndexAfterMove: null,
      stateBeforeMove: stateBeforeMove,
      stateAfterMove: stateAfterMove,
      move: move,
      numberOfPlayers: numberOfPlayers})).toBe(isOk);
  }

  function expectMoveOk(turnIndexBeforeMove: number, stateBeforeMove: IState, stateAfterMove: IState, move: IMove): void {
    expectMove(2, turnIndexBeforeMove, stateBeforeMove, stateAfterMove, move, true);
  }

  function expectIllegalMove(turnIndexBeforeMove: number, stateBeforeMove: IState, stateAfterMove: IState, move: IMove): void {
    expectMove(2, turnIndexBeforeMove, stateBeforeMove, stateAfterMove, move, false);
  }

  /*it("Get initial board is legal for two players", function() {
    expectMoveOk(0, undefined, undefined,
    [{"set":{"key":"tile0","value":{"leftNumber":0,"rightNumber":0}}},{"set":{"key":"tile1","value":{"leftNumber":0,"rightNumber":1}}},{"set":{"key":"tile2","value":{"leftNumber":1,"rightNumber":1}}},{"set":{"key":"tile3","value":{"leftNumber":0,"rightNumber":2}}},{"set":{"key":"tile4","value":{"leftNumber":1,"rightNumber":2}}},{"set":{"key":"tile5","value":{"leftNumber":2,"rightNumber":2}}},{"set":{"key":"tile6","value":{"leftNumber":0,"rightNumber":3}}},{"set":{"key":"tile7","value":{"leftNumber":1,"rightNumber":3}}},{"set":{"key":"tile8","value":{"leftNumber":2,"rightNumber":3}}},{"set":{"key":"tile9","value":{"leftNumber":3,"rightNumber":3}}},{"set":{"key":"tile10","value":{"leftNumber":0,"rightNumber":4}}},{"set":{"key":"tile11","value":{"leftNumber":1,"rightNumber":4}}},{"set":{"key":"tile12","value":{"leftNumber":2,"rightNumber":4}}},{"set":{"key":"tile13","value":{"leftNumber":3,"rightNumber":4}}},{"set":{"key":"tile14","value":{"leftNumber":4,"rightNumber":4}}},{"set":{"key":"tile15","value":{"leftNumber":0,"rightNumber":5}}},{"set":{"key":"tile16","value":{"leftNumber":1,"rightNumber":5}}},{"set":{"key":"tile17","value":{"leftNumber":2,"rightNumber":5}}},{"set":{"key":"tile18","value":{"leftNumber":3,"rightNumber":5}}},{"set":{"key":"tile19","value":{"leftNumber":4,"rightNumber":5}}},{"set":{"key":"tile20","value":{"leftNumber":5,"rightNumber":5}}},{"set":{"key":"tile21","value":{"leftNumber":0,"rightNumber":6}}},{"set":{"key":"tile22","value":{"leftNumber":1,"rightNumber":6}}},{"set":{"key":"tile23","value":{"leftNumber":2,"rightNumber":6}}},{"set":{"key":"tile24","value":{"leftNumber":3,"rightNumber":6}}},{"set":{"key":"tile25","value":{"leftNumber":4,"rightNumber":6}}},{"set":{"key":"tile26","value":{"leftNumber":5,"rightNumber":6}}},{"set":{"key":"tile27","value":{"leftNumber":6,"rightNumber":6}}},{"setTurn":{"turnIndex":0}},{"set":{"key":"house","value":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]}}},{"set":{"key":"board","value":{}}},{"shuffle":{"keys":["tile0","tile1","tile2","tile3","tile4","tile5","tile6","tile7","tile8","tile9","tile10","tile11","tile12","tile13","tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile3","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}]}},{"setVisibility":{"key":"tile0","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile1","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile2","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile3","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile4","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile5","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile6","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile7","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile8","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile9","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile10","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile11","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile12","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile13","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile14","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile15","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile16","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile17","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile18","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile19","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile20","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile21","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile22","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile23","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile24","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile25","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile26","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile27","visibleToPlayerIndexes":[]}}]);
  });

  it("Get initial board is legal for three players", function() {
    expectMove(3, 0, undefined, undefined,
    [{"set":{"key":"tile0","value":{"leftNumber":0,"rightNumber":0}}},{"set":{"key":"tile1","value":{"leftNumber":0,"rightNumber":1}}},{"set":{"key":"tile2","value":{"leftNumber":1,"rightNumber":1}}},{"set":{"key":"tile3","value":{"leftNumber":0,"rightNumber":2}}},{"set":{"key":"tile4","value":{"leftNumber":1,"rightNumber":2}}},{"set":{"key":"tile5","value":{"leftNumber":2,"rightNumber":2}}},{"set":{"key":"tile6","value":{"leftNumber":0,"rightNumber":3}}},{"set":{"key":"tile7","value":{"leftNumber":1,"rightNumber":3}}},{"set":{"key":"tile8","value":{"leftNumber":2,"rightNumber":3}}},{"set":{"key":"tile9","value":{"leftNumber":3,"rightNumber":3}}},{"set":{"key":"tile10","value":{"leftNumber":0,"rightNumber":4}}},{"set":{"key":"tile11","value":{"leftNumber":1,"rightNumber":4}}},{"set":{"key":"tile12","value":{"leftNumber":2,"rightNumber":4}}},{"set":{"key":"tile13","value":{"leftNumber":3,"rightNumber":4}}},{"set":{"key":"tile14","value":{"leftNumber":4,"rightNumber":4}}},{"set":{"key":"tile15","value":{"leftNumber":0,"rightNumber":5}}},{"set":{"key":"tile16","value":{"leftNumber":1,"rightNumber":5}}},{"set":{"key":"tile17","value":{"leftNumber":2,"rightNumber":5}}},{"set":{"key":"tile18","value":{"leftNumber":3,"rightNumber":5}}},{"set":{"key":"tile19","value":{"leftNumber":4,"rightNumber":5}}},{"set":{"key":"tile20","value":{"leftNumber":5,"rightNumber":5}}},{"set":{"key":"tile21","value":{"leftNumber":0,"rightNumber":6}}},{"set":{"key":"tile22","value":{"leftNumber":1,"rightNumber":6}}},{"set":{"key":"tile23","value":{"leftNumber":2,"rightNumber":6}}},{"set":{"key":"tile24","value":{"leftNumber":3,"rightNumber":6}}},{"set":{"key":"tile25","value":{"leftNumber":4,"rightNumber":6}}},{"set":{"key":"tile26","value":{"leftNumber":5,"rightNumber":6}}},{"set":{"key":"tile27","value":{"leftNumber":6,"rightNumber":6}}},{"setTurn":{"turnIndex":0}},{"set":{"key":"house","value":{"id":-1,"hand":["tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]}}},{"set":{"key":"board","value":{}}},{"shuffle":{"keys":["tile0","tile1","tile2","tile3","tile4","tile5","tile6","tile7","tile8","tile9","tile10","tile11","tile12","tile13","tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile3","tile4"]},{"id":1,"hand":["tile5","tile6","tile7","tile8","tile9"]},{"id":2,"hand":["tile10","tile11","tile12","tile13","tile14"]}]}},{"setVisibility":{"key":"tile0","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile1","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile2","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile3","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile4","visibleToPlayerIndexes":[0]}},{"setVisibility":{"key":"tile5","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile6","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile7","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile8","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile9","visibleToPlayerIndexes":[1]}},{"setVisibility":{"key":"tile10","visibleToPlayerIndexes":[2]}},{"setVisibility":{"key":"tile11","visibleToPlayerIndexes":[2]}},{"setVisibility":{"key":"tile12","visibleToPlayerIndexes":[2]}},{"setVisibility":{"key":"tile13","visibleToPlayerIndexes":[2]}},{"setVisibility":{"key":"tile14","visibleToPlayerIndexes":[2]}},{"setVisibility":{"key":"tile15","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile16","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile17","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile18","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile19","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile20","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile21","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile22","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile23","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile24","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile25","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile26","visibleToPlayerIndexes":[]}},{"setVisibility":{"key":"tile27","visibleToPlayerIndexes":[]}}], true);
  });

  it("Get initial board for more than 4 players is illegal", function() {
    expectMove(5, 0, undefined, undefined,
    [{set:{key:"tile0",value:{leftNumber:0,rightNumber:0},visibleToPlayerIndexes:[0]}},{set:{key:"tile1",value:{leftNumber:0,rightNumber:1},visibleToPlayerIndexes:[0]}},{set:{key:"tile2",value:{leftNumber:1,rightNumber:1},visibleToPlayerIndexes:[0]}},{set:{key:"tile3",value:{leftNumber:0,rightNumber:2},visibleToPlayerIndexes:[0]}},{set:{key:"tile4",value:{leftNumber:1,rightNumber:2},visibleToPlayerIndexes:[0]}},{set:{key:"tile5",value:{leftNumber:2,rightNumber:2},visibleToPlayerIndexes:[1]}},{set:{key:"tile6",value:{leftNumber:0,rightNumber:3},visibleToPlayerIndexes:[1]}},{set:{key:"tile7",value:{leftNumber:1,rightNumber:3},visibleToPlayerIndexes:[1]}},{set:{key:"tile8",value:{leftNumber:2,rightNumber:3},visibleToPlayerIndexes:[1]}},{set:{key:"tile9",value:{leftNumber:3,rightNumber:3},visibleToPlayerIndexes:[1]}},{set:{key:"tile10",value:{leftNumber:0,rightNumber:4},visibleToPlayerIndexes:[2]}},{set:{key:"tile11",value:{leftNumber:1,rightNumber:4},visibleToPlayerIndexes:[2]}},{set:{key:"tile12",value:{leftNumber:2,rightNumber:4},visibleToPlayerIndexes:[2]}},{set:{key:"tile13",value:{leftNumber:3,rightNumber:4},visibleToPlayerIndexes:[2]}},{set:{key:"tile14",value:{leftNumber:4,rightNumber:4},visibleToPlayerIndexes:[2]}},{set:{key:"tile15",value:{leftNumber:0,rightNumber:5},visibleToPlayerIndexes:[]}},{set:{key:"tile16",value:{leftNumber:1,rightNumber:5},visibleToPlayerIndexes:[]}},{set:{key:"tile17",value:{leftNumber:2,rightNumber:5},visibleToPlayerIndexes:[]}},{set:{key:"tile18",value:{leftNumber:3,rightNumber:5},visibleToPlayerIndexes:[]}},{set:{key:"tile19",value:{leftNumber:4,rightNumber:5},visibleToPlayerIndexes:[]}},{set:{key:"tile20",value:{leftNumber:5,rightNumber:5},visibleToPlayerIndexes:[]}},{set:{key:"tile21",value:{leftNumber:0,rightNumber:6},visibleToPlayerIndexes:[]}},{set:{key:"tile22",value:{leftNumber:1,rightNumber:6},visibleToPlayerIndexes:[]}},{set:{key:"tile23",value:{leftNumber:2,rightNumber:6},visibleToPlayerIndexes:[]}},{set:{key:"tile24",value:{leftNumber:3,rightNumber:6},visibleToPlayerIndexes:[]}},{set:{key:"tile25",value:{leftNumber:4,rightNumber:6},visibleToPlayerIndexes:[]}},{set:{key:"tile26",value:{leftNumber:5,rightNumber:6},visibleToPlayerIndexes:[]}},{set:{key:"tile27",value:{leftNumber:6,rightNumber:6},visibleToPlayerIndexes:[]}},{setTurn:{turnIndex:0}},{set:{key:"player0",value:{id:0,hand:["tile0","tile1","tile2","tile3","tile4"]}}},{set:{key:"player1",value:{id:1,hand:["tile5","tile6","tile7","tile8","tile9"]}}},{set:{key:"player2",value:{id:2,hand:["tile10","tile11","tile12","tile13","tile14"]}}}, {set:{key:"player3",value:{id:3,hand:["tile15","tile16","tile17","tile18","tile19"]}}},{set:{key:"player4",value:{id:4,hand:["tile20","tile21","tile22","tile23","tile24"]}}},{set:{key:"player5",value:{id:5,hand:["tile25","tile26","tile27"]}}},{set:{key:"house",value:{id:-1,hand:["tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]}}},{set:{key:"board",value:{}}},{shuffle:{keys:["tile0","tile1","tile2","tile3","tile4","tile5","tile6","tile7","tile8","tile9","tile10","tile11","tile12","tile13","tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]}}], false);
  });*/

  var stateBefore: IState = {"tile0":null,"tile1":null,"tile2":null,"tile3":null,"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile3","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}]};
  var stateAfter: IState = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile3"},"leftMost":"tile3","rightMost":"tile3"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}],"delta":{"play":1,"tileKey":"tile3"}};

  /*it("Initial move is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":1}},{"set":{"key":"board","value":{"root":{"tileKey":"tile3"},"leftMost":"tile3","rightMost":"tile3"}}},{"set":{"key":"delta","value":{"play":1,"tileKey":"tile3"}}},{"setVisibility":{"key":"tile3","visibleToPlayerIndexes":[0,1]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}]}}]);
   });

   stateBefore = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":null,"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile3"},"leftMost":"tile3","rightMost":"tile3"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}],"delta":{"play":1,"tileKey":"tile3"}};
   stateAfter = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"}},"leftMost":"tile3","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":1,"tileKey":"tile9"}};

   it("Move play tile to the right is legal", function() {
     expectMoveOk(1, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":0}},{"set":{"key":"board","value":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"}},"leftMost":"tile3","rightMost":"tile9"}}},{"set":{"key":"delta","value":{"play":1,"tileKey":"tile9"}}},{"setVisibility":{"key":"tile9","visibleToPlayerIndexes":[0,1]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}]}}]);
   });

   stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"}},"leftMost":"tile3","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20","tile18"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":2,"tileKey":"tile18"}};
   stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":0,"tileKey":"tile18"}};

   it("Move play tile to the left is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":1}},{"set":{"key":"board","value":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile9"}}},{"set":{"key":"delta","value":{"play":0,"tileKey":"tile18"}}},{"setVisibility":{"key":"tile18","visibleToPlayerIndexes":[0,1]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}]}}]);
   });

   stateBefore = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":0,"tileKey":"tile18"}};
   stateAfter = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":1,"tileKey":"tile13"}};

   it("Move play additional tile to the right is legal", function() {
     expectMoveOk(1, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":0}},{"set":{"key":"board","value":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile13"}}},{"set":{"key":"delta","value":{"play":1,"tileKey":"tile13"}}},{"setVisibility":{"key":"tile13","visibleToPlayerIndexes":[0,1]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}]}}]);
   });

   stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":1,"tileKey":"tile13"}};
   stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":0,"tileKey":"tile5"}};

   it("Move play additional tile to the left is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":1}},{"set":{"key":"board","value":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"}}},{"set":{"key":"delta","value":{"play":0,"tileKey":"tile5"}}},{"setVisibility":{"key":"tile5","visibleToPlayerIndexes":[0,1]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}]}}]);
   });

  //  it("Move play left tile that needs to be flipped is legal", function() {
  //    expectMoveOk(0, {"tile0":{"leftNumber":2,"rightNumber":6},"tile1":{"leftNumber":0,"rightNumber":5},"tile2":{"leftNumber":4,"rightNumber":5},"tile3":{"leftNumber":1,"rightNumber":2},"tile4":{"leftNumber":6,"rightNumber":6},"tile5":{"leftNumber":1,"rightNumber":6},"tile6":{"leftNumber":3,"rightNumber":3},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":4},"tile10":{"leftNumber":4,"rightNumber":6},"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"leftNumber":2,"rightNumber":6,"rightTile":{"leftNumber":6,"rightNumber":4,"rightTile":{"leftNumber":4,"rightNumber":1}},"leftTile":{"leftNumber":1,"rightNumber":2}},"leftMost":{"leftNumber":1,"rightNumber":2},"rightMost":{"leftNumber":4,"rightNumber":1}},"players":[{"id":0,"hand":["tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile11","tile12","tile13"]}],"delta":{"tileKey":"tile5","play":Play.LEFT}},
  //    [{"setTurn":{"turnIndex":1}},{"set":{"key":"board","value":{"root":{"leftNumber":2,"rightNumber":6,"rightTile":{"leftNumber":6,"rightNumber":4,"rightTile":{"leftNumber":4,"rightNumber":1}},"leftTile":{"leftNumber":1,"rightNumber":2,"leftTile":{"leftNumber":6,"rightNumber":1}}},"leftMost":{"leftNumber":6,"rightNumber":1},"rightMost":{"leftNumber":4,"rightNumber":1}}}},{"set":{"key":"delta","value":{"tileKey":"tile5","play":0}}},{"setVisibility":{"key":"tile5","visibleToPlayerIndexes":[0,1]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile1","tile2","tile4","tile6"]},{"id":1,"hand":["tile7","tile8","tile11","tile12","tile13"]}]}}]);
  //  });

  stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":0,"tileKey":"tile5"}};
  stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":{"leftNumber":0,"rightNumber":6},"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile27"]}],"delta":{"play":2,"tileKey":"tile27"}};

   it("Move buy from house is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":0}},{"set":{"key":"board","value":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"}}},{"set":{"key":"delta","value":{"play":2,"tileKey":"tile27"}}},{"setVisibility":{"key":"tile27","visibleToPlayerIndexes":[0]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20","tile27"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}]}},{"set":{"key":"house","value":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25"]}}}]);
   });

   it("Move play last tile is legal", function() {
     expectMoveOk(0, {"tile0":{"leftNumber":2,"rightNumber":6},"tile1":{"leftNumber":0,"rightNumber":5},"tile2":{"leftNumber":4,"rightNumber":5},"tile3":{"leftNumber":1,"rightNumber":2},"tile4":{"leftNumber":6,"rightNumber":6},"tile5":{"leftNumber":1,"rightNumber":1},"tile6":{"leftNumber":3,"rightNumber":3},"tile7":{"leftNumber":1,"rightNumber":3},"tile8":null,"tile9":{"leftNumber":1,"rightNumber":4},"tile10":{"leftNumber":4,"rightNumber":6},"tile11":{"leftNumber":2,"rightNumber":3},"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"leftNumber":2,"rightNumber":6,"rightTile":{"leftNumber":6,"rightNumber":4,"rightTile":{"leftNumber":4,"rightNumber":1,"rightTile":{"leftNumber":1,"rightNumber":3,"rightTile":{"leftNumber":3,"rightNumber":2}}}},"leftTile":{"leftNumber":1,"rightNumber":2,"leftTile":{"leftNumber":1,"rightNumber":1}}},"leftMost":{"leftNumber":1,"rightNumber":1},"rightMost":{"leftNumber":3,"rightNumber":2}},"players":[{"id":0,"hand":["tile1","tile2","tile4"]},{"id":1,"hand":["tile8","tile12","tile13"]}],"delta":{"tileKey":"tile14","play":Play.BUY}},
     [{"setTurn":{"turnIndex":0}},{"set":{"key":"board","value":{"root":{"leftNumber":2,"rightNumber":6,"rightTile":{"leftNumber":6,"rightNumber":4,"rightTile":{"leftNumber":4,"rightNumber":1,"rightTile":{"leftNumber":1,"rightNumber":3,"rightTile":{"leftNumber":3,"rightNumber":2}}}},"leftTile":{"leftNumber":1,"rightNumber":2,"leftTile":{"leftNumber":1,"rightNumber":1}}},"leftMost":{"leftNumber":1,"rightNumber":1},"rightMost":{"leftNumber":3,"rightNumber":2}}}},{"set":{"key":"delta","value":{"tileKey":"tile14","play":2}}},{"setVisibility":{"key":"tile14","visibleToPlayerIndexes":[0]}},{"set":{"key":"players","value":[{"id":0,"hand":["tile1","tile2","tile4","tile14"]},{"id":1,"hand":["tile8","tile12","tile13"]}]}}]);
   });

   stateBefore = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile27"]}],"delta":{"play":2,"tileKey":"tile27"}};
   stateAfter = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile27"]}],"delta":{"play":3}};

   it("Move pass is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"setTurn":{"turnIndex":0}},{"set":{"key":"delta","value":{"play":3}}}]);
   });

   stateBefore = {"tile0":{"leftNumber":4,"rightNumber":4},"tile1":{"leftNumber":0,"rightNumber":0},"tile2":{"leftNumber":1,"rightNumber":5},"tile3":{"leftNumber":3,"rightNumber":5},"tile4":{"leftNumber":1,"rightNumber":1},"tile5":{"leftNumber":2,"rightNumber":4},"tile6":{"leftNumber":1,"rightNumber":2},"tile7":null,"tile8":null,"tile9":null,"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile3","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}],"delta":{"play":3}};
   stateAfter = {"tile0":{"leftNumber":4,"rightNumber":4},"tile1":{"leftNumber":0,"rightNumber":0},"tile2":{"leftNumber":1,"rightNumber":5},"tile3":{"leftNumber":3,"rightNumber":5},"tile4":{"leftNumber":1,"rightNumber":1},"tile5":{"leftNumber":2,"rightNumber":4},"tile6":{"leftNumber":1,"rightNumber":2},"tile7":{"leftNumber":1,"rightNumber":4},"tile8":{"leftNumber":0,"rightNumber":6},"tile9":{"leftNumber":0,"rightNumber":1},"tile10":{"leftNumber":0,"rightNumber":2},"tile11":{"leftNumber":4,"rightNumber":6},"tile12":{"leftNumber":1,"rightNumber":3},"tile13":{"leftNumber":5,"rightNumber":5},"tile14":{"leftNumber":3,"rightNumber":3},"tile15":{"leftNumber":5,"rightNumber":6},"tile16":{"leftNumber":0,"rightNumber":5},"tile17":{"leftNumber":2,"rightNumber":5},"tile18":{"leftNumber":2,"rightNumber":2},"tile19":{"leftNumber":4,"rightNumber":5},"tile20":{"leftNumber":0,"rightNumber":3},"tile21":{"leftNumber":2,"rightNumber":6},"tile22":{"leftNumber":2,"rightNumber":3},"tile23":{"leftNumber":3,"rightNumber":6},"tile24":{"leftNumber":0,"rightNumber":4},"tile25":{"leftNumber":3,"rightNumber":4},"tile26":{"leftNumber":1,"rightNumber":6},"tile27":{"leftNumber":6,"rightNumber":6},"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile3","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}],"delta":{"play":4}};

   it("Move reveal all tiles is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"setVisibility":{"key":"tile0","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile1","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile2","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile3","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile4","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile5","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile6","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile7","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile8","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile9","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile10","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile11","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile12","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile13","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile14","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile15","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile16","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile17","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile18","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile19","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile20","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile21","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile22","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile23","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile24","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile25","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile26","visibleToPlayerIndexes":[0,1]}},{"setVisibility":{"key":"tile27","visibleToPlayerIndexes":[0,1]}},{"setTurn":{"turnIndex":0}},{"set":{"key":"delta","value":{"play":4}}},{"set":{"key":"players","value":[{"id":0,"hand":["tile0","tile1","tile2","tile3","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}]}}]);
   });

   stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":null,"tile4":null,"tile5":null,"tile6":null,"tile7":null,"tile8":null,"tile9":null,"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile19","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile1","rightTile":{"tileKey":"tile18","rightTile":{"tileKey":"tile0","rightTile":{"tileKey":"tile6","rightTile":{"tileKey":"tile5","rightTile":{"tileKey":"tile4","rightTile":{"tileKey":"tile22"}}}}}},"leftTile":{"tileKey":"tile21","leftTile":{"tileKey":"tile2","leftTile":{"tileKey":"tile11","leftTile":{"tileKey":"tile8","leftTile":{"tileKey":"tile9"}}}}}},"leftMost":"tile9","rightMost":"tile22"},"players":[{"id":0,"hand":[]},{"id":1,"hand":["tile7","tile10","tile12","tile13","tile24","tile23","tile20"]}],"delta":{"play":4,"tileKey":"tile3"}};
   stateAfter = {"tile0":{"leftNumber":0,"rightNumber":6},"tile1":{"leftNumber":5,"rightNumber":5},"tile2":{"leftNumber":1,"rightNumber":3},"tile3":{"leftNumber":2,"rightNumber":5},"tile4":{"leftNumber":1,"rightNumber":1},"tile5":{"leftNumber":1,"rightNumber":5},"tile6":{"leftNumber":5,"rightNumber":6},"tile7":{"leftNumber":2,"rightNumber":2},"tile8":{"leftNumber":4,"rightNumber":4},"tile9":{"leftNumber":3,"rightNumber":4},"tile10":{"leftNumber":0,"rightNumber":0},"tile11":{"leftNumber":1,"rightNumber":4},"tile12":{"leftNumber":0,"rightNumber":3},"tile13":{"leftNumber":2,"rightNumber":3},"tile14":{"leftNumber":0,"rightNumber":1},"tile15":{"leftNumber":2,"rightNumber":6},"tile16":{"leftNumber":4,"rightNumber":6},"tile17":{"leftNumber":6,"rightNumber":6},"tile18":{"leftNumber":0,"rightNumber":5},"tile19":{"leftNumber":3,"rightNumber":6},"tile20":{"leftNumber":2,"rightNumber":4},"tile21":{"leftNumber":3,"rightNumber":5},"tile22":{"leftNumber":1,"rightNumber":2},"tile23":{"leftNumber":0,"rightNumber":2},"tile24":{"leftNumber":0,"rightNumber":4},"tile25":{"leftNumber":4,"rightNumber":5},"tile26":{"leftNumber":3,"rightNumber":3},"tile27":{"leftNumber":1,"rightNumber":6},"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile19","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile1","rightTile":{"tileKey":"tile18","rightTile":{"tileKey":"tile0","rightTile":{"tileKey":"tile6","rightTile":{"tileKey":"tile5","rightTile":{"tileKey":"tile4","rightTile":{"tileKey":"tile22"}}}}}},"leftTile":{"tileKey":"tile21","leftTile":{"tileKey":"tile2","leftTile":{"tileKey":"tile11","leftTile":{"tileKey":"tile8","leftTile":{"tileKey":"tile9"}}}}}},"leftMost":"tile9","rightMost":"tile22"},"players":[{"id":0,"hand":[]},{"id":1,"hand":["tile7","tile10","tile12","tile13","tile24","tile23","tile20"]}],"delta":{"play":5}};

   it("Move end game with no tiles is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"set":{"key":"tile0","value":{"leftNumber":0,"rightNumber":6}}},{"set":{"key":"tile1","value":{"leftNumber":5,"rightNumber":5}}},{"set":{"key":"tile2","value":{"leftNumber":1,"rightNumber":3}}},{"set":{"key":"tile3","value":{"leftNumber":2,"rightNumber":5}}},{"set":{"key":"tile4","value":{"leftNumber":1,"rightNumber":1}}},{"set":{"key":"tile5","value":{"leftNumber":1,"rightNumber":5}}},{"set":{"key":"tile6","value":{"leftNumber":5,"rightNumber":6}}},{"set":{"key":"tile7","value":{"leftNumber":2,"rightNumber":2}}},{"set":{"key":"tile8","value":{"leftNumber":4,"rightNumber":4}}},{"set":{"key":"tile9","value":{"leftNumber":3,"rightNumber":4}}},{"set":{"key":"tile10","value":{"leftNumber":0,"rightNumber":0}}},{"set":{"key":"tile11","value":{"leftNumber":1,"rightNumber":4}}},{"set":{"key":"tile12","value":{"leftNumber":0,"rightNumber":3}}},{"set":{"key":"tile13","value":{"leftNumber":2,"rightNumber":3}}},{"set":{"key":"tile14","value":{"leftNumber":0,"rightNumber":1}}},{"set":{"key":"tile15","value":{"leftNumber":2,"rightNumber":6}}},{"set":{"key":"tile16","value":{"leftNumber":4,"rightNumber":6}}},{"set":{"key":"tile17","value":{"leftNumber":6,"rightNumber":6}}},{"set":{"key":"tile18","value":{"leftNumber":0,"rightNumber":5}}},{"set":{"key":"tile19","value":{"leftNumber":3,"rightNumber":6}}},{"set":{"key":"tile20","value":{"leftNumber":2,"rightNumber":4}}},{"set":{"key":"tile21","value":{"leftNumber":3,"rightNumber":5}}},{"set":{"key":"tile22","value":{"leftNumber":1,"rightNumber":2}}},{"set":{"key":"tile23","value":{"leftNumber":0,"rightNumber":2}}},{"set":{"key":"tile24","value":{"leftNumber":0,"rightNumber":4}}},{"set":{"key":"tile25","value":{"leftNumber":4,"rightNumber":5}}},{"set":{"key":"tile26","value":{"leftNumber":3,"rightNumber":3}}},{"set":{"key":"tile27","value":{"leftNumber":1,"rightNumber":6}}},{"endMatch":{"endMatchScores":[24,0]}},{"set":{"key":"delta","value":{"play":5}}}]);
   });

   stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":null,"tile4":null,"tile5":null,"tile6":null,"tile7":null,"tile8":null,"tile9":null,"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile0","rightTile":{"tileKey":"tile12","rightTile":{"tileKey":"tile5","rightTile":{"tileKey":"tile13"}}},"leftTile":{"tileKey":"tile6"}},"leftMost":"tile6","rightMost":"tile13"},"players":[{"id":0,"hand":["tile1","tile2","tile3","tile4"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11"]}],"delta":{"play":4}};
   stateAfter = {"tile0":{"leftNumber":6,"rightNumber":6},"tile1":{"leftNumber":0,"rightNumber":3},"tile2":{"leftNumber":0,"rightNumber":2},"tile3":{"leftNumber":0,"rightNumber":1},"tile4":{"leftNumber":1,"rightNumber":4},"tile5":{"leftNumber":3,"rightNumber":4},"tile6":{"leftNumber":4,"rightNumber":6},"tile7":{"leftNumber":1,"rightNumber":2},"tile8":{"leftNumber":0,"rightNumber":0},"tile9":{"leftNumber":0,"rightNumber":6},"tile10":{"leftNumber":1,"rightNumber":1},"tile11":{"leftNumber":5,"rightNumber":5},"tile12":{"leftNumber":3,"rightNumber":6},"tile13":{"leftNumber":4,"rightNumber":4},"tile14":{"leftNumber":1,"rightNumber":5},"tile15":{"leftNumber":4,"rightNumber":5},"tile16":{"leftNumber":3,"rightNumber":5},"tile17":{"leftNumber":0,"rightNumber":4},"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":2,"rightNumber":2},"tile20":{"leftNumber":5,"rightNumber":6},"tile21":{"leftNumber":1,"rightNumber":6},"tile22":{"leftNumber":2,"rightNumber":3},"tile23":{"leftNumber":2,"rightNumber":4},"tile24":{"leftNumber":3,"rightNumber":3},"tile25":{"leftNumber":0,"rightNumber":5},"tile26":{"leftNumber":1,"rightNumber":3},"tile27":{"leftNumber":2,"rightNumber":5},"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile0","rightTile":{"tileKey":"tile12","rightTile":{"tileKey":"tile5","rightTile":{"tileKey":"tile13"}}},"leftTile":{"tileKey":"tile6"}},"leftMost":"tile6","rightMost":"tile13"},"players":[{"id":0,"hand":["tile1","tile2","tile3","tile4"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11"]}],"delta":{"play":5}};

   it("Move end game with more than one tile is legal", function() {
     expectMoveOk(0, stateBefore, stateAfter,
     [{"set":{"key":"tile0","value":{"leftNumber":6,"rightNumber":6}}},{"set":{"key":"tile1","value":{"leftNumber":0,"rightNumber":3}}},{"set":{"key":"tile2","value":{"leftNumber":0,"rightNumber":2}}},{"set":{"key":"tile3","value":{"leftNumber":0,"rightNumber":1}}},{"set":{"key":"tile4","value":{"leftNumber":1,"rightNumber":4}}},{"set":{"key":"tile5","value":{"leftNumber":3,"rightNumber":4}}},{"set":{"key":"tile6","value":{"leftNumber":4,"rightNumber":6}}},{"set":{"key":"tile7","value":{"leftNumber":1,"rightNumber":2}}},{"set":{"key":"tile8","value":{"leftNumber":0,"rightNumber":0}}},{"set":{"key":"tile9","value":{"leftNumber":0,"rightNumber":6}}},{"set":{"key":"tile10","value":{"leftNumber":1,"rightNumber":1}}},{"set":{"key":"tile11","value":{"leftNumber":5,"rightNumber":5}}},{"set":{"key":"tile12","value":{"leftNumber":3,"rightNumber":6}}},{"set":{"key":"tile13","value":{"leftNumber":4,"rightNumber":4}}},{"set":{"key":"tile14","value":{"leftNumber":1,"rightNumber":5}}},{"set":{"key":"tile15","value":{"leftNumber":4,"rightNumber":5}}},{"set":{"key":"tile16","value":{"leftNumber":3,"rightNumber":5}}},{"set":{"key":"tile17","value":{"leftNumber":0,"rightNumber":4}}},{"set":{"key":"tile18","value":{"leftNumber":2,"rightNumber":6}}},{"set":{"key":"tile19","value":{"leftNumber":2,"rightNumber":2}}},{"set":{"key":"tile20","value":{"leftNumber":5,"rightNumber":6}}},{"set":{"key":"tile21","value":{"leftNumber":1,"rightNumber":6}}},{"set":{"key":"tile22","value":{"leftNumber":2,"rightNumber":3}}},{"set":{"key":"tile23","value":{"leftNumber":2,"rightNumber":4}}},{"set":{"key":"tile24","value":{"leftNumber":3,"rightNumber":3}}},{"set":{"key":"tile25","value":{"leftNumber":0,"rightNumber":5}}},{"set":{"key":"tile26","value":{"leftNumber":1,"rightNumber":3}}},{"set":{"key":"tile27","value":{"leftNumber":2,"rightNumber":5}}},{"endMatch":{"endMatchScores":[10,0]}},{"set":{"key":"delta","value":{"play":5}}}]);
   });

   stateBefore = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":0,"tileKey":"tile18"}};
   stateAfter = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":0,"tileKey":"tile13"}};
   it("Move play left tile with wrong number is illegal", function() {
     expectIllegalMove(1, stateBefore, stateAfter,
     []);
   });

   stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"}},"leftMost":"tile3","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20","tile18"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":2,"tileKey":"tile18"}};
   stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":1,"tileKey":"tile18"}};

   it("Move play right tile with wrong number is illegal", function() {
     expectIllegalMove(0, stateBefore, stateAfter,
     []);
  });

  stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":[]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":0,"tileKey":"tile5"}};
  stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":{"leftNumber":0,"rightNumber":6},"house":{"id":-1,"hand":[]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile27"]}],"delta":{"play":2,"tileKey":"tile27"}};

   it("Move buy from house with no tiles is illegal", function() {
     expectIllegalMove(1, stateBefore, stateAfter,
     []);
   });

   stateBefore = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":0,"tileKey":"tile18"}};
   stateAfter = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":{"leftNumber":0,"rightNumber":3},"tile20":{"leftNumber":1,"rightNumber":5},"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":{"leftNumber":5,"rightNumber":5},"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":1,"tileKey":"tile15"}};

   it("Move play unknown tile to the right is illegal", function() {
     expectIllegalMove(0, stateBefore, stateAfter,
     []);
   });

   stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12"]}],"delta":{"play":0,"tileKey":"tile5"}};
   stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":{"leftNumber":0,"rightNumber":6},"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile27"]}],"delta":{"play":2,"tileKey":"tile13"}};

  it("Move buy unknown tile from house is illegal", function() {
    expectIllegalMove(1, stateBefore, stateAfter,
    []);
  });

  stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":null,"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18"}},"leftMost":"tile18","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6","tile26","tile19","tile20"]},{"id":1,"hand":[]}],"delta":{"play":1,"tileKey":"tile13"}};
  stateAfter = {"tile0":null,"tile1":null,"tile2":null,"tile3":{"leftNumber":6,"rightNumber":6},"tile4":null,"tile5":{"leftNumber":2,"rightNumber":3},"tile6":null,"tile7":{"leftNumber":4,"rightNumber":5},"tile8":{"leftNumber":3,"rightNumber":6},"tile9":{"leftNumber":1,"rightNumber":6},"tile10":{"leftNumber":3,"rightNumber":3},"tile11":{"leftNumber":0,"rightNumber":2},"tile12":{"leftNumber":0,"rightNumber":0},"tile13":{"leftNumber":1,"rightNumber":1},"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":{"leftNumber":2,"rightNumber":6},"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile21","tile22","tile23","tile24","tile25","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9","rightTile":{"tileKey":"tile13"}},"leftTile":{"tileKey":"tile18","leftTile":{"tileKey":"tile5"}}},"leftMost":"tile5","rightMost":"tile13"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile6","tile26","tile19","tile20"]},{"id":1,"hand":[]}],"delta":{"play":0,"tileKey":"tile5"}};


  it("Move after game was already won is illegal", function() {
    expectIllegalMove(1, stateBefore, stateAfter,
    []);
  });

  stateBefore = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":null,"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile3"},"leftMost":"tile3","rightMost":"tile3"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile9","tile10","tile11","tile12","tile13"]}],"delta":{"play":1,"tileKey":"tile3"}};
  stateAfter = {"tile0":{"leftNumber":3,"rightNumber":5},"tile1":{"leftNumber":4,"rightNumber":4},"tile2":{"leftNumber":2,"rightNumber":2},"tile3":{"leftNumber":6,"rightNumber":6},"tile4":{"leftNumber":0,"rightNumber":4},"tile5":{"leftNumber":2,"rightNumber":3},"tile6":{"leftNumber":2,"rightNumber":4},"tile7":null,"tile8":null,"tile9":{"leftNumber":1,"rightNumber":6},"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile18","tile19","tile20","tile21","tile22","tile23","tile24","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile3","rightTile":{"tileKey":"tile9"}},"leftMost":"tile3","rightMost":"tile9"},"players":[{"id":0,"hand":["tile0","tile1","tile2","tile4","tile5","tile6"]},{"id":1,"hand":["tile7","tile8","tile10","tile11","tile12","tile13"]}],"delta":{"play":10,"tileKey":"tile9"}};

 it("Move unknown is illegal", function() {
    expectIllegalMove(1, stateBefore, stateAfter,
    []);
  });*/

  stateBefore = {"tile0":null,"tile1":null,"tile2":null,"tile3":null,"tile4":null,"tile5":null,"tile6":null,"tile7":null,"tile8":null,"tile9":null,"tile10":null,"tile11":null,"tile12":null,"tile13":null,"tile14":null,"tile15":null,"tile16":null,"tile17":null,"tile18":null,"tile19":null,"tile20":null,"tile21":null,"tile22":null,"tile23":null,"tile24":null,"tile25":null,"tile26":null,"tile27":null,"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile19","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile1","rightTile":{"tileKey":"tile18","rightTile":{"tileKey":"tile0","rightTile":{"tileKey":"tile6","rightTile":{"tileKey":"tile5","rightTile":{"tileKey":"tile4","rightTile":{"tileKey":"tile22"}}}}}},"leftTile":{"tileKey":"tile21","leftTile":{"tileKey":"tile2","leftTile":{"tileKey":"tile11","leftTile":{"tileKey":"tile8","leftTile":{"tileKey":"tile9"}}}}}},"leftMost":"tile9","rightMost":"tile22"},"players":[{"id":0,"hand":[]},{"id":1,"hand":["tile7","tile10","tile12","tile13","tile24","tile23","tile20"]}],"delta":{"play":4,"tileKey":"tile3"}};
  stateAfter = {"tile0":{"leftNumber":0,"rightNumber":6},"tile1":{"leftNumber":5,"rightNumber":5},"tile2":{"leftNumber":1,"rightNumber":3},"tile3":{"leftNumber":2,"rightNumber":5},"tile4":{"leftNumber":1,"rightNumber":1},"tile5":{"leftNumber":1,"rightNumber":5},"tile6":{"leftNumber":5,"rightNumber":6},"tile7":{"leftNumber":2,"rightNumber":2},"tile8":{"leftNumber":4,"rightNumber":4},"tile9":{"leftNumber":3,"rightNumber":4},"tile10":{"leftNumber":0,"rightNumber":0},"tile11":{"leftNumber":1,"rightNumber":4},"tile12":{"leftNumber":0,"rightNumber":3},"tile13":{"leftNumber":2,"rightNumber":3},"tile14":{"leftNumber":0,"rightNumber":1},"tile15":{"leftNumber":2,"rightNumber":6},"tile16":{"leftNumber":4,"rightNumber":6},"tile17":{"leftNumber":6,"rightNumber":6},"tile18":{"leftNumber":0,"rightNumber":5},"tile19":{"leftNumber":3,"rightNumber":6},"tile20":{"leftNumber":2,"rightNumber":4},"tile21":{"leftNumber":3,"rightNumber":5},"tile22":{"leftNumber":1,"rightNumber":2},"tile23":{"leftNumber":0,"rightNumber":2},"tile24":{"leftNumber":0,"rightNumber":4},"tile25":{"leftNumber":4,"rightNumber":5},"tile26":{"leftNumber":3,"rightNumber":3},"tile27":{"leftNumber":1,"rightNumber":6},"house":{"id":-1,"hand":["tile14","tile15","tile16","tile17","tile19","tile25","tile26","tile27"]},"board":{"root":{"tileKey":"tile1","rightTile":{"tileKey":"tile18","rightTile":{"tileKey":"tile0","rightTile":{"tileKey":"tile6","rightTile":{"tileKey":"tile5","rightTile":{"tileKey":"tile4","rightTile":{"tileKey":"tile22"}}}}}},"leftTile":{"tileKey":"tile21","leftTile":{"tileKey":"tile2","leftTile":{"tileKey":"tile11","leftTile":{"tileKey":"tile8","leftTile":{"tileKey":"tile9"}}}}}},"leftMost":"tile9","rightMost":"tile22"},"players":[{"id":0,"hand":[]},{"id":1,"hand":["tile7","tile10","tile12","tile13","tile24","tile23","tile20"]}],"delta":{"play":5}};

  it("Move incorrect expected move is illegal", function() {
    expectIllegalMove(1, stateBefore, stateAfter,
    []);
  });

});
